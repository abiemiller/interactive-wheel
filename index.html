<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wheel – Numbered Debug</title>

  <style>
    body{
      margin:0;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      font-family:Arial, sans-serif;
    }
    .stage{
      width:min(640px,96vw);
      padding:12px;
    }
    svg{
      width:100%;
      height:auto;
      display:block;
      aspect-ratio:1/1;
      user-select:none;
    }

    /* faint outlines so we can confirm slices exist */
    .slice-outline{
      fill: rgba(255,255,255,0);
      stroke: rgba(0,0,0,0.15);
      stroke-width: 2;
    }

    /* number badge */
    .badge-circle{
      fill: rgba(255,255,255,0.95);
      stroke: rgba(0,0,0,0.25);
      stroke-width: 2;
    }
    .badge-text{
      fill:#000;
      font-size:36px;
      font-weight:700;
      text-anchor:middle;
    }
  </style>
</head>

<body>
  <div class="stage">
    <svg viewBox="0 0 1000 1000" aria-label="Numbered Literacy Wheel">
      <!-- Wheel image -->
      <image href="Wheel.png" x="0" y="0" width="1000" height="1000" preserveAspectRatio="xMidYMid meet"></image>

      <!-- Outlines and badges go ABOVE the image -->
      <g id="outlines"></g>
      <g id="badges"></g>
    </svg>
  </div>

  <script>
    const cx = 500, cy = 500;

    // Adjust these if needed (usually fine as-is)
    const rInner = 180;
    const rOuter = 470;

    const sliceSize = 45;
    const half = sliceSize / 2;

    // Matches your original CSS logic: 0° is right, + is clockwise
    const centers = [
      -90,  // 1
      -45,  // 2
       0,   // 3
       45,  // 4
       90,  // 5
       135, // 6
       180, // 7
      -135  // 8
    ];

    function polar(r, deg){
      const rad = deg * Math.PI / 180;
      return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };
    }

    function wedgePath(start, end){
      const p1 = polar(rOuter, start);
      const p2 = polar(rOuter, end);
      const p3 = polar(rInner, end);
      const p4 = polar(rInner, start);

      // For 45° slices, largeArc is always 0, but keep it correct anyway:
      const sweep = ((end - start) % 360 + 360) % 360;
      const largeArc = sweep > 180 ? 1 : 0;

      return [
        `M ${p1.x} ${p1.y}`,
        `A ${rOuter} ${rOuter} 0 ${largeArc} 1 ${p2.x} ${p2.y}`,
        `L ${p3.x} ${p3.y}`,
        `A ${rInner} ${rInner} 0 ${largeArc} 0 ${p4.x} ${p4.y}`,
        `Z`
      ].join(" ");
    }

    const outlines = document.getElementById("outlines");
    const badges = document.getElementById("badges");

    centers.forEach((c, idx) => {
      const start = c - half;
      const end = c + half;

      // 1) Slice outline
      const path = document.createElementNS("http://www.w3.org/2000/svg","path");
      path.setAttribute("d", wedgePath(start, end));
      path.setAttribute("class","slice-outline");
      outlines.appendChild(path);

      // 2) Number badge (circle + text)
      const mid = polar((rInner + rOuter)/2, c);

      const g = document.createElementNS("http://www.w3.org/2000/svg","g");

      const circle = document.createElementNS("http://www.w3.org/2000/svg","circle");
      circle.setAttribute("cx", mid.x);
      circle.setAttribute("cy", mid.y);
      circle.setAttribute("r", 34);
      circle.setAttribute("class", "badge-circle");

      const text = document.createElementNS("http://www.w3.org/2000/svg","text");
      text.setAttribute("x", mid.x);
      // Instead of dominant-baseline, use a small y offset:
      text.setAttribute("y", mid.y + 12);
      text.setAttribute("class", "badge-text");
      text.textContent = String(idx + 1);

      g.appendChild(circle);
      g.appendChild(text);
      badges.appendChild(g);
    });
  </script>
</body>
</html>
