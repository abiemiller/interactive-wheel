<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive Literacy Wheel</title>

  <style>
    body{
      margin:0;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      font-family:Arial, sans-serif;
    }

    .stage{
      width: min(640px, 96vw);
      padding: 12px;
    }

    svg{
      width:100%;
      height:auto;
      display:block;
      aspect-ratio:1/1;
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }

    a{ cursor:pointer; }

    /* NO GLOW / NO HIGHLIGHT: keep hit areas fully invisible */
    .hit, .center-hit{
      fill: rgba(255,255,255,0);
      stroke: rgba(255,255,255,0);
      stroke-width: 0;
    }
  </style>
</head>

<body>
  <div class="stage">
    <svg viewBox="0 0 1000 1000" role="img" aria-label="Interactive Literacy Wheel">
      <!-- ROTOR: everything that spins -->
      <g id="rotor">
        <image href="Wheel.png" x="0" y="0" width="1000" height="1000" preserveAspectRatio="xMidYMid meet"></image>
        <g id="slices"></g>
        <g id="rims"></g>
      </g>

      <!-- CENTER: stays “clickable” for spinning -->
      <circle id="centerCircle" class="center-hit" cx="500" cy="500" r="150"></circle>
    </svg>
  </div>

  <script>
    // ---------------- Helpers ----------------
    // IMPORTANT: match your original CSS angle system:
    // 0deg = 3 o'clock (pointing right), 90deg = 6 o'clock (down), -90deg = 12 o'clock (up)
    function polarToXY(cx, cy, r, deg){
      const rad = deg * Math.PI / 180;
      return { x: cx + r * Math.cos(rad), y: cy + r * Math.sin(rad) };
    }

    function annularSectorPath(cx, cy, rInner, rOuter, startDeg, endDeg){
      const p1 = polarToXY(cx, cy, rOuter, startDeg);
      const p2 = polarToXY(cx, cy, rOuter, endDeg);
      const p3 = polarToXY(cx, cy, rInner, endDeg);
      const p4 = polarToXY(cx, cy, rInner, startDeg);

      const sweep = ((endDeg - startDeg) % 360 + 360) % 360;
      const largeArc = sweep > 180 ? 1 : 0;

      return [
        `M ${p1.x} ${p1.y}`,
        `A ${rOuter} ${rOuter} 0 ${largeArc} 1 ${p2.x} ${p2.y}`,
        `L ${p3.x} ${p3.y}`,
        `A ${rInner} ${rInner} 0 ${largeArc} 0 ${p4.x} ${p4.y}`,
        "Z"
      ].join(" ");
    }

    function makeSvgEl(tag){
      return document.createElementNS("http://www.w3.org/2000/svg", tag);
    }

    // ---------------- Your slice links (1–8) ----------------
    const sliceLinks = [
      { label: "Culturally and Linguistically Responsive", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/culturally-and-linguistically-responsive" },
      { label: "Assessment", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/assessment" },
      { label: "Phonological Awareness", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/phonological-awareness" },
      { label: "Phonics and Spelling", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/phonics-and-spelling" },
      { label: "Vocabulary and Morphology", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/vocabulary-and-morphology" },
      { label: "Syntax", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/syntax" },
      { label: "Cross Linguistic Connections", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/cross-linguistic-connections" },
      { label: "Text Comprehension and Written Expression", href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/text-comprehension-and-written-expression" },
    ];

    // Match your original “pill hotspot” angles:
    // 1:-90, 2:-45, 3:0, 4:45, 5:90, 6:135, 7:180, 8:-135
  const centers = [-45, 0, 45, 90, 135, 180, 225, -90];

    // ---------------- Build wedges + rims ----------------
    const cx = 500, cy = 500;

    // If clicks feel too close/too far, tweak these:
    const rInner = 190;
    const rOuter = 465;
    const halfSpan = 22.5; // 45° per slice

    const slicesGroup = document.getElementById("slices");

    sliceLinks.forEach((s, i) => {
      const c = centers[i];
      const start = c - halfSpan;
      const end   = c + halfSpan;

      const a = makeSvgEl("a");
      a.setAttribute("href", s.href);
      a.setAttribute("target", "_blank");
      a.setAttribute("rel", "noopener");
      a.setAttribute("aria-label", s.label);

      const p = makeSvgEl("path");
      p.setAttribute("d", annularSectorPath(cx, cy, rInner, rOuter, start, end));
      p.setAttribute("class", "hit");

      a.appendChild(p);
      slicesGroup.appendChild(a);
    });

    // Rim links (still optional; adjust if you want different destinations)
    const rimsGroup = document.getElementById("rims");
    const rimInner = 470;
    const rimOuter = 495;

    const rimLinks = [
      {
        label: "Oral Language Development and Academic Language",
        href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls/oral-language-development-and-academic-language",
        start: 200,
        end: 340
      },
      {
        label: "Literacy for MLs Home",
        href: "https://sites.google.com/cherrycreekschools.org/ccsd-literacy-for-mls",
        start: 20,
        end: 160
      }
    ];

    rimLinks.forEach(r => {
      const a = makeSvgEl("a");
      a.setAttribute("href", r.href);
      a.setAttribute("target", "_blank");
      a.setAttribute("rel", "noopener");
      a.setAttribute("aria-label", r.label);

      const p = makeSvgEl("path");
      p.setAttribute("d", annularSectorPath(cx, cy, rimInner, rimOuter, r.start, r.end));
      p.setAttribute("class", "hit");

      a.appendChild(p);
      rimsGroup.appendChild(a);
    });

    // ---------------- Spin (tap/click center) ----------------
    const rotor = document.getElementById("rotor");
    const centerCircle = document.getElementById("centerCircle");

    let angle = 0;
    let velocity = 0;
    let spinning = false;
    let rafId = null;

    function render(){
      rotor.setAttribute("transform", `rotate(${angle} ${cx} ${cy})`);
    }

    function tick(){
      if(!spinning) return;

      velocity *= 0.985;         // friction
      angle = (angle + velocity) % 360;

      render();

      if(Math.abs(velocity) < 0.05){
        spinning = false;
        velocity = 0;
        return;
      }
      rafId = requestAnimationFrame(tick);
    }

    function spin(){
      const kick = 18 + Math.random() * 10; // spin strength
      velocity += kick;
      if(!spinning){
        spinning = true;
        cancelAnimationFrame(rafId);
        rafId = requestAnimationFrame(tick);
      }
    }

    centerCircle.addEventListener("pointerdown", (e) => {
      e.preventDefault();
      spin();
    });

    render();
  </script>
</body>
</html>
